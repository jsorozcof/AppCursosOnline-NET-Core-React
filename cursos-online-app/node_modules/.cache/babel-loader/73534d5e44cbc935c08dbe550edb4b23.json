{"ast":null,"code":"import _defineProperty from\"C:\\\\A_GitHub\\\\AppCursosOnline-NET-Core-React\\\\cursos-online-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\A_GitHub\\\\AppCursosOnline-NET-Core-React\\\\cursos-online-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\A_GitHub\\\\AppCursosOnline-NET-Core-React\\\\cursos-online-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import style from\"../Tool/Style\";import{Container,Grid,TextField,Typography,Button,Avatar}from\"@material-ui/core\";import{actualizarUsuario,obtenerUsuarioActual}from\"../../actions/UsuarioAction\";import{useStateValue}from\"../../contexto/store\";import reactFoto from\"../../logo.svg\";import{v4 as uuidv4}from\"uuid\";import ImageUploader from\"react-images-upload\";import{obtenerDataImagen}from\"../../actions/ImagenAction\";var PerfilUsuario=function PerfilUsuario(){var _useStateValue=useStateValue(),_useStateValue2=_slicedToArray(_useStateValue,2),sesionUsuario=_useStateValue2[0].sesionUsuario,dispatch=_useStateValue2[1];var _useState=useState({nombreCompleto:\"\",email:\"\",password:\"\",confirmarPassword:\"\",username:\"\",imagenPerfil:null,fotoUrl:\"\"}),_useState2=_slicedToArray(_useState,2),usuario=_useState2[0],setUsuario=_useState2[1];var ingresarValoresMemoria=function ingresarValoresMemoria(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setUsuario(function(anterior){return _objectSpread(_objectSpread({},anterior),{},_defineProperty({},name,value));});};useEffect(function(){setUsuario(sesionUsuario.usuario);setUsuario(function(anterior){return _objectSpread(_objectSpread({},anterior),{},{fotoUrl:sesionUsuario.usuario.imagenPerfil,imagenPerfil:null});});},[]);var guardarUsuario=function guardarUsuario(e){e.preventDefault();actualizarUsuario(usuario,dispatch).then(function(response){if(response.status==200){dispatch({type:\"OPEN_SNACKBAR\",openMensaje:{open:true,mensaje:\"Se guardaron exitosamente los camnbio en el perfil usuario\"}});window.localStorage.setItem(\"token_seguridad\",response.data.token);}else{dispatch({type:\"OPEN_SNACKBAR\",openMensaje:{open:true,mensaje:\"Errores al intentar guardar en : \"+Object.keys(response.data.errors)}});}//console.log('se actualizo el usuario', response);\n});};var subirFoto=function subirFoto(imagenes){var foto=imagenes[0];var fotoUrl=URL.createObjectURL(foto);obtenerDataImagen(foto).then(function(respuesta){console.log(\"Respuesta\",respuesta);setUsuario(function(anterior){return _objectSpread(_objectSpread({},anterior),{},{imagenPerfil:respuesta,// respuesta es un json que proviene del action obtener imagen\nfotoUrl:fotoUrl});});});};var fotoKey=uuidv4();return/*#__PURE__*/React.createElement(Container,{componen:\"main\",maxWidth:\"md\",justity:\"center\"},/*#__PURE__*/React.createElement(\"div\",{style:style.paper},/*#__PURE__*/React.createElement(Avatar,{style:style.avatar,src:usuario.fotoUrl||reactFoto}),/*#__PURE__*/React.createElement(Typography,{component:\"h1\",variant:\"h5\"},\"Perfil de Usuario\"),/*#__PURE__*/React.createElement(\"form\",{style:style.form},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:2},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,md:12},/*#__PURE__*/React.createElement(TextField,{name:\"nombreCompleto\",value:usuario.nombreCompleto,onChange:ingresarValoresMemoria,variant:\"outlined\",fullWidth:true,label:\"Ingrese nombre y apellido\"})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,md:6},/*#__PURE__*/React.createElement(TextField,{name:\"username\",value:usuario.username,onChange:ingresarValoresMemoria,variant:\"outlined\",fullWidth:true,label:\"Ingrese Username\"})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,md:6},/*#__PURE__*/React.createElement(TextField,{name:\"email\",value:usuario.email,onChange:ingresarValoresMemoria,variant:\"outlined\",fullWidth:true,label:\"Ingrese email\"})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,md:6},/*#__PURE__*/React.createElement(TextField,{name:\"password\",value:usuario.password,onChange:ingresarValoresMemoria,type:\"password\",variant:\"outlined\",fullWidth:true,label:\"Ingrese password\"})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,md:6},/*#__PURE__*/React.createElement(TextField,{name:\"confirmarPassword\",value:usuario.confirmarPassword,onChange:ingresarValoresMemoria,type:\"password\",variant:\"outlined\",fullWidth:true,label:\"Confirme password\"})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,md:12},/*#__PURE__*/React.createElement(ImageUploader,{withIcon:false,key:fotoKey,single:true,buttonText:\"Seleccione una imagen de perfil\",onChange:subirFoto,imgExtension:[\".jpg\",\"gif\",\".png\",\"jpeg\"],maxFileSize:5242880}))),/*#__PURE__*/React.createElement(Grid,{container:true,justify:\"center\"},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,md:6},/*#__PURE__*/React.createElement(Button,{type:\"submit\",onClick:guardarUsuario,fullWidth:true,variant:\"contained\",size:\"large\",color:\"primary\",style:style.submit},\"Guardar datos\"))))));};export default PerfilUsuario;","map":{"version":3,"sources":["C:/A_GitHub/AppCursosOnline-NET-Core-React/cursos-online-app/src/componentes/seguridad/PerfilUsuario.js"],"names":["React","useEffect","useState","style","Container","Grid","TextField","Typography","Button","Avatar","actualizarUsuario","obtenerUsuarioActual","useStateValue","v4","uuidv4","ImageUploader","obtenerDataImagen","PerfilUsuario","sesionUsuario","dispatch","nombreCompleto","email","password","confirmarPassword","username","imagenPerfil","fotoUrl","usuario","setUsuario","ingresarValoresMemoria","e","target","name","value","anterior","guardarUsuario","preventDefault","then","response","status","type","openMensaje","open","mensaje","window","localStorage","setItem","data","token","Object","keys","errors","subirFoto","imagenes","foto","URL","createObjectURL","respuesta","console","log","fotoKey","paper","avatar","reactFoto","form","submit"],"mappings":"kjBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,eAAlB,CACA,OACEC,SADF,CAEEC,IAFF,CAGEC,SAHF,CAIEC,UAJF,CAKEC,MALF,CAMEC,MANF,KAOO,mBAPP,CAQA,OACEC,iBADF,CAEEC,oBAFF,KAGO,6BAHP,CAIA,OAASC,aAAT,KAA8B,sBAA9B,C,sCAEA,OAASC,EAAE,GAAIC,CAAAA,MAAf,KAA6B,MAA7B,CACA,MAAOC,CAAAA,aAAP,KAA0B,qBAA1B,CACA,OAASC,iBAAT,KAAkC,4BAAlC,CAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,oBACYL,aAAa,EADzB,kDACjBM,aADiB,oBACjBA,aADiB,CACAC,QADA,kCAEIjB,QAAQ,CAAC,CACrCkB,cAAc,CAAE,EADqB,CAErCC,KAAK,CAAE,EAF8B,CAGrCC,QAAQ,CAAE,EAH2B,CAIrCC,iBAAiB,CAAE,EAJkB,CAKrCC,QAAQ,CAAE,EAL2B,CAMrCC,YAAY,CAAE,IANuB,CAOrCC,OAAO,CAAE,EAP4B,CAAD,CAFZ,wCAEnBC,OAFmB,eAEVC,UAFU,eAY1B,GAAMC,CAAAA,sBAAsB,CAAG,QAAzBA,CAAAA,sBAAyB,CAACC,CAAD,CAAO,eACZA,CAAC,CAACC,MADU,CAC5BC,IAD4B,WAC5BA,IAD4B,CACtBC,KADsB,WACtBA,KADsB,CAEpCL,UAAU,CAAC,SAACM,QAAD,wCACNA,QADM,wBAERF,IAFQ,CAEDC,KAFC,IAAD,CAAV,CAID,CAND,CAQAhC,SAAS,CAAC,UAAM,CACd2B,UAAU,CAACV,aAAa,CAACS,OAAf,CAAV,CACAC,UAAU,CAAC,SAACM,QAAD,wCACNA,QADM,MAETR,OAAO,CAAER,aAAa,CAACS,OAAd,CAAsBF,YAFtB,CAGTA,YAAY,CAAG,IAHN,IAAD,CAAV,CAKD,CAPQ,CAON,EAPM,CAAT,CASA,GAAMU,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACL,CAAD,CAAO,CAC5BA,CAAC,CAACM,cAAF,GACA1B,iBAAiB,CAACiB,OAAD,CAASR,QAAT,CAAjB,CAAoCkB,IAApC,CAAyC,SAACC,QAAD,CAAc,CACrD,GAAIA,QAAQ,CAACC,MAAT,EAAmB,GAAvB,CAA4B,CAC1BpB,QAAQ,CAAC,CACPqB,IAAI,CAAE,eADC,CAEPC,WAAW,CAAE,CACXC,IAAI,CAAE,IADK,CAEXC,OAAO,CACL,4DAHS,CAFN,CAAD,CAAR,CASAC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,iBAA5B,CAA+CR,QAAQ,CAACS,IAAT,CAAcC,KAA7D,EACD,CAXD,IAWO,CACL7B,QAAQ,CAAC,CACPqB,IAAI,CAAE,eADC,CAEPC,WAAW,CAAE,CACXC,IAAI,CAAE,IADK,CAEXC,OAAO,CACL,oCACAM,MAAM,CAACC,IAAP,CAAYZ,QAAQ,CAACS,IAAT,CAAcI,MAA1B,CAJS,CAFN,CAAD,CAAR,CASD,CACD;AACD,CAxBD,EAyBD,CA3BD,CA6BA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,QAAD,CAAc,CAC9B,GAAMC,CAAAA,IAAI,CAAGD,QAAQ,CAAC,CAAD,CAArB,CACA,GAAM3B,CAAAA,OAAO,CAAG6B,GAAG,CAACC,eAAJ,CAAoBF,IAApB,CAAhB,CAEAtC,iBAAiB,CAACsC,IAAD,CAAjB,CAAwBjB,IAAxB,CAA6B,SAACoB,SAAD,CAAe,CAC1CC,OAAO,CAACC,GAAR,CAAY,WAAZ,CAAyBF,SAAzB,EACA7B,UAAU,CAAC,SAACM,QAAD,wCACNA,QADM,MAETT,YAAY,CAAEgC,SAFL,CAEgB;AACzB/B,OAAO,CAAEA,OAHA,IAAD,CAAV,CAKD,CAPD,EAQD,CAZD,CAcA,GAAMkC,CAAAA,OAAO,CAAG9C,MAAM,EAAtB,CAEA,mBACE,oBAAC,SAAD,EAAW,QAAQ,CAAC,MAApB,CAA2B,QAAQ,CAAC,IAApC,CAAyC,OAAO,CAAC,QAAjD,eACE,2BAAK,KAAK,CAAEX,KAAK,CAAC0D,KAAlB,eACE,oBAAC,MAAD,EAAQ,KAAK,CAAE1D,KAAK,CAAC2D,MAArB,CAA6B,GAAG,CAAEnC,OAAO,CAACD,OAAR,EAAmBqC,SAArD,EADF,cAGE,oBAAC,UAAD,EAAY,SAAS,CAAC,IAAtB,CAA2B,OAAO,CAAC,IAAnC,sBAHF,cAOE,4BAAM,KAAK,CAAE5D,KAAK,CAAC6D,IAAnB,eACE,oBAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAE,CAAzB,eACE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,CAAmB,EAAE,CAAE,EAAvB,eACE,oBAAC,SAAD,EACE,IAAI,CAAC,gBADP,CAEE,KAAK,CAAErC,OAAO,CAACP,cAFjB,CAGE,QAAQ,CAAES,sBAHZ,CAIE,OAAO,CAAC,UAJV,CAKE,SAAS,KALX,CAME,KAAK,CAAC,2BANR,EADF,CADF,cAYE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,CAAmB,EAAE,CAAE,CAAvB,eACE,oBAAC,SAAD,EACE,IAAI,CAAC,UADP,CAEE,KAAK,CAAEF,OAAO,CAACH,QAFjB,CAGE,QAAQ,CAAEK,sBAHZ,CAIE,OAAO,CAAC,UAJV,CAKE,SAAS,KALX,CAME,KAAK,CAAC,kBANR,EADF,CAZF,cAuBE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,CAAmB,EAAE,CAAE,CAAvB,eACE,oBAAC,SAAD,EACE,IAAI,CAAC,OADP,CAEE,KAAK,CAAEF,OAAO,CAACN,KAFjB,CAGE,QAAQ,CAAEQ,sBAHZ,CAIE,OAAO,CAAC,UAJV,CAKE,SAAS,KALX,CAME,KAAK,CAAC,eANR,EADF,CAvBF,cAkCE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,CAAmB,EAAE,CAAE,CAAvB,eACE,oBAAC,SAAD,EACE,IAAI,CAAC,UADP,CAEE,KAAK,CAAEF,OAAO,CAACL,QAFjB,CAGE,QAAQ,CAAEO,sBAHZ,CAIE,IAAI,CAAC,UAJP,CAKE,OAAO,CAAC,UALV,CAME,SAAS,KANX,CAOE,KAAK,CAAC,kBAPR,EADF,CAlCF,cA8CE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,CAAmB,EAAE,CAAE,CAAvB,eACE,oBAAC,SAAD,EACE,IAAI,CAAC,mBADP,CAEE,KAAK,CAAEF,OAAO,CAACJ,iBAFjB,CAGE,QAAQ,CAAEM,sBAHZ,CAIE,IAAI,CAAC,UAJP,CAKE,OAAO,CAAC,UALV,CAME,SAAS,KANX,CAOE,KAAK,CAAC,mBAPR,EADF,CA9CF,cA0DE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,CAAmB,EAAE,CAAE,EAAvB,eACE,oBAAC,aAAD,EACE,QAAQ,CAAE,KADZ,CAEE,GAAG,CAAE+B,OAFP,CAGE,MAAM,CAAE,IAHV,CAIE,UAAU,CAAC,iCAJb,CAKE,QAAQ,CAAER,SALZ,CAME,YAAY,CAAE,CAAC,MAAD,CAAS,KAAT,CAAgB,MAAhB,CAAwB,MAAxB,CANhB,CAOE,WAAW,CAAE,OAPf,EADF,CA1DF,CADF,cAwEE,oBAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAC,QAAxB,eACE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,CAAmB,EAAE,CAAE,CAAvB,eACE,oBAAC,MAAD,EACE,IAAI,CAAC,QADP,CAEE,OAAO,CAAEjB,cAFX,CAGE,SAAS,KAHX,CAIE,OAAO,CAAC,WAJV,CAKE,IAAI,CAAC,OALP,CAME,KAAK,CAAC,SANR,CAOE,KAAK,CAAEhC,KAAK,CAAC8D,MAPf,kBADF,CADF,CAxEF,CAPF,CADF,CADF,CAoGD,CA9KD,CAgLA,cAAehD,CAAAA,aAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport style from \"../Tool/Style\";\r\nimport {\r\n  Container,\r\n  Grid,\r\n  TextField,\r\n  Typography,\r\n  Button,\r\n  Avatar,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  actualizarUsuario,\r\n  obtenerUsuarioActual,\r\n} from \"../../actions/UsuarioAction\";\r\nimport { useStateValue } from \"../../contexto/store\";\r\nimport reactFoto from \"../../logo.svg\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport ImageUploader from \"react-images-upload\";\r\nimport { obtenerDataImagen } from \"../../actions/ImagenAction\";\r\n\r\nconst PerfilUsuario = () => {\r\n  const [{ sesionUsuario }, dispatch] = useStateValue();\r\n  const [usuario, setUsuario] = useState({\r\n    nombreCompleto: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    confirmarPassword: \"\",\r\n    username: \"\",\r\n    imagenPerfil: null,\r\n    fotoUrl: \"\",\r\n  });\r\n\r\n  const ingresarValoresMemoria = (e) => {\r\n    const { name, value } = e.target;\r\n    setUsuario((anterior) => ({\r\n      ...anterior,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    setUsuario(sesionUsuario.usuario);\r\n    setUsuario((anterior) => ({\r\n      ...anterior,\r\n      fotoUrl: sesionUsuario.usuario.imagenPerfil,\r\n      imagenPerfil : null\r\n    }));\r\n  }, []);\r\n\r\n  const guardarUsuario = (e) => {\r\n    e.preventDefault();\r\n    actualizarUsuario(usuario,dispatch).then((response) => {\r\n      if (response.status == 200) {\r\n        dispatch({\r\n          type: \"OPEN_SNACKBAR\",\r\n          openMensaje: {\r\n            open: true,\r\n            mensaje:\r\n              \"Se guardaron exitosamente los camnbio en el perfil usuario\",\r\n          },\r\n        });\r\n\r\n        window.localStorage.setItem(\"token_seguridad\", response.data.token);\r\n      } else {\r\n        dispatch({\r\n          type: \"OPEN_SNACKBAR\",\r\n          openMensaje: {\r\n            open: true,\r\n            mensaje:\r\n              \"Errores al intentar guardar en : \" +\r\n              Object.keys(response.data.errors),\r\n          },\r\n        });\r\n      }\r\n      //console.log('se actualizo el usuario', response);\r\n    });\r\n  };\r\n\r\n  const subirFoto = (imagenes) => {\r\n    const foto = imagenes[0];\r\n    const fotoUrl = URL.createObjectURL(foto);\r\n\r\n    obtenerDataImagen(foto).then((respuesta) => {\r\n      console.log(\"Respuesta\", respuesta);\r\n      setUsuario((anterior) => ({\r\n        ...anterior,\r\n        imagenPerfil: respuesta, // respuesta es un json que proviene del action obtener imagen\r\n        fotoUrl: fotoUrl,\r\n      }));\r\n    });\r\n  };\r\n\r\n  const fotoKey = uuidv4();\r\n\r\n  return (\r\n    <Container componen=\"main\" maxWidth=\"md\" justity=\"center\">\r\n      <div style={style.paper}>\r\n        <Avatar style={style.avatar} src={usuario.fotoUrl || reactFoto} />\r\n\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Perfil de Usuario\r\n        </Typography>\r\n\r\n        <form style={style.form}>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} md={12}>\r\n              <TextField\r\n                name=\"nombreCompleto\"\r\n                value={usuario.nombreCompleto}\r\n                onChange={ingresarValoresMemoria}\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                label=\"Ingrese nombre y apellido\"\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={12} md={6}>\r\n              <TextField\r\n                name=\"username\"\r\n                value={usuario.username}\r\n                onChange={ingresarValoresMemoria}\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                label=\"Ingrese Username\"\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={12} md={6}>\r\n              <TextField\r\n                name=\"email\"\r\n                value={usuario.email}\r\n                onChange={ingresarValoresMemoria}\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                label=\"Ingrese email\"\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={12} md={6}>\r\n              <TextField\r\n                name=\"password\"\r\n                value={usuario.password}\r\n                onChange={ingresarValoresMemoria}\r\n                type=\"password\"\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                label=\"Ingrese password\"\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={12} md={6}>\r\n              <TextField\r\n                name=\"confirmarPassword\"\r\n                value={usuario.confirmarPassword}\r\n                onChange={ingresarValoresMemoria}\r\n                type=\"password\"\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                label=\"Confirme password\"\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={12} md={12}>\r\n              <ImageUploader\r\n                withIcon={false}\r\n                key={fotoKey}\r\n                single={true}\r\n                buttonText=\"Seleccione una imagen de perfil\"\r\n                onChange={subirFoto}\r\n                imgExtension={[\".jpg\", \"gif\", \".png\", \"jpeg\"]}\r\n                maxFileSize={5242880}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n\r\n          <Grid container justify=\"center\">\r\n            <Grid item xs={12} md={6}>\r\n              <Button\r\n                type=\"submit\"\r\n                onClick={guardarUsuario}\r\n                fullWidth\r\n                variant=\"contained\"\r\n                size=\"large\"\r\n                color=\"primary\"\r\n                style={style.submit}\r\n              >\r\n                Guardar datos\r\n              </Button>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default PerfilUsuario;\r\n"]},"metadata":{},"sourceType":"module"}