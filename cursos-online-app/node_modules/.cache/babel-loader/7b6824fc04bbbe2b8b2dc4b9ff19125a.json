{"ast":null,"code":"var _jsxFileName = \"C:\\\\A_GitHub\\\\AppCursosOnline-NET-Core-React\\\\cursos-online-app\\\\src\\\\componentes\\\\cursos\\\\NuevoCurso.js\";\nimport React from \"react\";\nimport { useState } from \"react\";\nimport { Button, Container, Grid, TextField, Typography } from \"@material-ui/core\";\nimport style from \"../Tool/Style\";\nimport { KeyboardDatePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\nimport DateFnsUtils from \"@date-io/date-fns\";\nimport ImageUploader from \"react-images-upload\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { obtenerDataImagen } from \"../../actions/ImagenAction\";\nimport { guardarCurso } from \"../../actions/CursoAction\";\nimport { parse } from \"date-fns/esm\";\nimport { useStateValue } from \"../../contexto/store\";\n\nconst NuevoCurso = () => {\n  const [{\n    sesionUsuario\n  }, dispatch] = useStateValue;\n  const [fechaSeleccionada, setFechaSeleccionada] = useState(new Date());\n  const [imagenCurso, setImagenCurso] = useState(null);\n  const [curso, setCurso] = useState({\n    titulo: \"\",\n    descripcion: \"\",\n    precio: 0.0,\n    promocion: 0.0\n  });\n\n  const ingresarValoresMemoria = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setCurso(anterior => ({ ...anterior,\n      [name]: value\n    }));\n  };\n\n  const subirFoto = imagenes => {\n    const foto = imagenes[0];\n    obtenerDataImagen(foto).then(respuesta => {\n      setImagenCurso(respuesta);\n    });\n  };\n\n  const guardarCursoClick = e => {\n    e.preventDefault();\n    const cursoId = uuidv4();\n    const objetoCurso = {\n      titulo: curso.titulo,\n      descripcion: curso.descripcion,\n      promocion: parseFloat(curso.promocion || 0.0),\n      precio: parseFloat(curso.precio || 0.0),\n      fechaPublicacion: fechaSeleccionada,\n      cursoId: cursoId\n    };\n    let objetoImagen = null;\n\n    if (imagenCurso) {\n      objetoImagen = {\n        nombre: imagenCurso.nombre,\n        data: imagenCurso.data,\n        extension: imagenCurso.extension,\n        objetoReferencia: cursoId\n      };\n    }\n\n    guardarCurso(objetoCurso, objetoImagen).then(respuesta => {\n      const responseCurso = respuesta[0];\n      const responseImagen = respuesta[1];\n      let mensaje = \"\";\n\n      if (responseCurso.status === 200) {\n        mensaje += \"Se guardo exitosamente el curso\";\n      } else {\n        mensaje += \"Errores: \" + Object.keys(responseCurso.data.errors);\n      }\n\n      if (responseImagen) {\n        if (responseImagen.status === 200) {\n          mensaje += \",Se guardo la imagen correctamente\";\n        } else {\n          mensaje += \",Errores al cargar la imagen: \" + +Object.keys(responseCurso.data.errors);\n        }\n      }\n\n      dispatch({\n        type: \"OPEN_SNACKBAR\",\n        openMensaje: {\n          open: true,\n          mensaje: mensaje\n        }\n      });\n    });\n  };\n\n  const fotoKey = uuidv4();\n  return /*#__PURE__*/React.createElement(Container, {\n    component: \"main\",\n    maxWidth: \"md\",\n    justity: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: style.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    component: \"h1\",\n    variant: \"h5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, \"Registro de nuevo curso\"), /*#__PURE__*/React.createElement(\"form\", {\n    style: style.form,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    name: \"titulo\",\n    variant: \"outlined\",\n    fullWidth: true,\n    label: \"Ingrese Titulo\",\n    value: curso.titulo,\n    onChange: ingresarValoresMemoria,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    name: \"descripcion\",\n    variant: \"outlined\",\n    fullWidth: true,\n    label: \"Ingrese descripcion\",\n    value: curso.descripcion,\n    onChange: ingresarValoresMemoria,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    name: \"precio\",\n    variant: \"outlined\",\n    fullWidth: true,\n    label: \"Ingrese Precio Normal\",\n    value: curso.precio,\n    onChange: ingresarValoresMemoria,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    name: \"promocion\",\n    variant: \"outlined\",\n    fullWidth: true,\n    label: \"Ingrese Precio Promocion\",\n    value: curso.promocion,\n    onChange: ingresarValoresMemoria,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MuiPickersUtilsProvider, {\n    utils: DateFnsUtils,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(KeyboardDatePicker, {\n    value: fechaSeleccionada,\n    onChange: setFechaSeleccionada,\n    margin: \"normal\",\n    id: \"fecha-publicacion-id\",\n    label: \"Seleccione fecha de publicacion\",\n    format: \"dd/MM/yyyy\",\n    fullWidth: true,\n    KeyboardButtonProps: {\n      \"aria-label\": \"change date\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ImageUploader, {\n    withIcon: false,\n    key: fotoKey,\n    singleImage: true,\n    buttonText: \"Seleccione imagen del curso\",\n    onChange: subirFoto,\n    imgExtension: [\".jpg\", \".gif\", \".png\", \".jpeg\"],\n    maxFileSize: 5242880,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    fullWidth: true,\n    variant: \"contained\",\n    color: \"primary\",\n    style: style.submit,\n    onClick: guardarCursoClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 15\n    }\n  }, \"Guardar Curso\"))))));\n};\n\nexport default NuevoCurso;","map":{"version":3,"sources":["C:/A_GitHub/AppCursosOnline-NET-Core-React/cursos-online-app/src/componentes/cursos/NuevoCurso.js"],"names":["React","useState","Button","Container","Grid","TextField","Typography","style","KeyboardDatePicker","MuiPickersUtilsProvider","DateFnsUtils","ImageUploader","v4","uuidv4","obtenerDataImagen","guardarCurso","parse","useStateValue","NuevoCurso","sesionUsuario","dispatch","fechaSeleccionada","setFechaSeleccionada","Date","imagenCurso","setImagenCurso","curso","setCurso","titulo","descripcion","precio","promocion","ingresarValoresMemoria","e","name","value","target","anterior","subirFoto","imagenes","foto","then","respuesta","guardarCursoClick","preventDefault","cursoId","objetoCurso","parseFloat","fechaPublicacion","objetoImagen","nombre","data","extension","objetoReferencia","responseCurso","responseImagen","mensaje","status","Object","keys","errors","type","openMensaje","open","fotoKey","paper","form","submit"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { useState } from \"react\";\r\nimport {\r\n  Button,\r\n  Container,\r\n  Grid,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport style from \"../Tool/Style\";\r\nimport {\r\n  KeyboardDatePicker,\r\n  MuiPickersUtilsProvider,\r\n} from \"@material-ui/pickers\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\nimport ImageUploader from \"react-images-upload\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { obtenerDataImagen } from \"../../actions/ImagenAction\";\r\nimport { guardarCurso } from \"../../actions/CursoAction\";\r\nimport { parse } from \"date-fns/esm\";\r\nimport { useStateValue } from \"../../contexto/store\";\r\n\r\nconst NuevoCurso = () => {\r\n  const [{ sesionUsuario }, dispatch] = useStateValue;\r\n\r\n  const [fechaSeleccionada, setFechaSeleccionada] = useState(new Date());\r\n\r\n  const [imagenCurso, setImagenCurso] = useState(null);\r\n\r\n  const [curso, setCurso] = useState({\r\n    titulo: \"\",\r\n    descripcion: \"\",\r\n    precio: 0.0,\r\n    promocion: 0.0,\r\n  });\r\n\r\n  const ingresarValoresMemoria = (e) => {\r\n    const { name, value } = e.target;\r\n    setCurso((anterior) => ({\r\n      ...anterior,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  const subirFoto = (imagenes) => {\r\n    const foto = imagenes[0];\r\n\r\n    obtenerDataImagen(foto).then((respuesta) => {\r\n      setImagenCurso(respuesta);\r\n    });\r\n  };\r\n\r\n  const guardarCursoClick = (e) => {\r\n    e.preventDefault();\r\n\r\n    const cursoId = uuidv4();\r\n\r\n    const objetoCurso = {\r\n      titulo: curso.titulo,\r\n      descripcion: curso.descripcion,\r\n      promocion: parseFloat(curso.promocion || 0.0),\r\n      precio: parseFloat(curso.precio || 0.0),\r\n      fechaPublicacion: fechaSeleccionada,\r\n      cursoId: cursoId,\r\n    };\r\n\r\n    let objetoImagen = null;\r\n    if (imagenCurso) {\r\n      objetoImagen = {\r\n        nombre: imagenCurso.nombre,\r\n        data: imagenCurso.data,\r\n        extension: imagenCurso.extension,\r\n        objetoReferencia: cursoId,\r\n      };\r\n    }\r\n\r\n    guardarCurso(objetoCurso, objetoImagen).then((respuesta) => {\r\n        const responseCurso = respuesta[0];\r\n        const responseImagen = respuesta[1];\r\n        let mensaje = \"\";\r\n\r\n        if(responseCurso.status === 200){\r\n            mensaje += \"Se guardo exitosamente el curso\";\r\n        }else {\r\n            mensaje += \"Errores: \" + Object.keys(responseCurso.data.errors);\r\n        }\r\n\r\n        if(responseImagen){\r\n            if(responseImagen.status === 200){\r\n                mensaje+= \",Se guardo la imagen correctamente\";\r\n            }else {\r\n                mensaje+= \",Errores al cargar la imagen: \" + + Object.keys(responseCurso.data.errors);\r\n            }\r\n        }\r\n\r\n        dispatch({\r\n            type: \"OPEN_SNACKBAR\",\r\n            openMensaje: {\r\n                open: true,\r\n                mensaje: mensaje\r\n            }\r\n        });\r\n\r\n    });\r\n  };\r\n\r\n  const fotoKey = uuidv4();\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"md\" justity=\"center\">\r\n      <div style={style.paper}>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Registro de nuevo curso\r\n        </Typography>\r\n\r\n        <form style={style.form}>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} md={12}>\r\n              <TextField\r\n                name=\"titulo\"\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                label=\"Ingrese Titulo\"\r\n                value={curso.titulo}\r\n                onChange={ingresarValoresMemoria}\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={12} md={12}>\r\n              <TextField\r\n                name=\"descripcion\"\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                label=\"Ingrese descripcion\"\r\n                value={curso.descripcion}\r\n                onChange={ingresarValoresMemoria}\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={12} md={6}>\r\n              <TextField\r\n                name=\"precio\"\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                label=\"Ingrese Precio Normal\"\r\n                value={curso.precio}\r\n                onChange={ingresarValoresMemoria}\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={12} md={6}>\r\n              <TextField\r\n                name=\"promocion\"\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                label=\"Ingrese Precio Promocion\"\r\n                value={curso.promocion}\r\n                onChange={ingresarValoresMemoria}\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={12} md={6}>\r\n              <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n                <KeyboardDatePicker\r\n                  value={fechaSeleccionada}\r\n                  onChange={setFechaSeleccionada}\r\n                  margin=\"normal\"\r\n                  id=\"fecha-publicacion-id\"\r\n                  label=\"Seleccione fecha de publicacion\"\r\n                  format=\"dd/MM/yyyy\"\r\n                  fullWidth\r\n                  KeyboardButtonProps={{\r\n                    \"aria-label\": \"change date\",\r\n                  }}\r\n                />\r\n              </MuiPickersUtilsProvider>\r\n            </Grid>\r\n\r\n            <Grid item xs={12} md={6}>\r\n              <ImageUploader\r\n                withIcon={false}\r\n                key={fotoKey}\r\n                singleImage={true}\r\n                buttonText=\"Seleccione imagen del curso\"\r\n                onChange={subirFoto}\r\n                imgExtension={[\".jpg\", \".gif\", \".png\", \".jpeg\"]}\r\n                maxFileSize={5242880}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n\r\n          <Grid container justify=\"center\">\r\n            <Grid item xs={12} md={6}>\r\n              <Button\r\n                type=\"submit\"\r\n                fullWidth\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                style={style.submit}\r\n                onClick={guardarCursoClick}\r\n              >\r\n                Guardar Curso\r\n              </Button>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default NuevoCurso;\r\n"]},"metadata":{},"sourceType":"module"}